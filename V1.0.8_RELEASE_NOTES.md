# v1.0.8 Release Notes

## What's New

**Root Cause Analysis Complete** - Finally figured out why FallingTree wasn't batching:
- FallingTree breaks trees via `level.removeBlock()` which **bypasses PlayerBlockBreakEvents**
- All subsequent blocks (after the initial click) are "silent" - no events fire
- Batching can't detect what it doesn't receive events for

## Solution

v1.0.8 increases the accumulation window and radius to handle FallingTree's behavior:

### Changes Made
- **Accumulation Window**: 60 ticks → **120 ticks** (doubled, gives more time)
- **Detection Radius**: 50 blocks → **100 blocks** (doubled, for larger trees)
- **Player Tracking**: Added active breaker tracking for better state management

### Behavior

**Before (v1.0.7):**
```
Click tree → 1st block detected → 60 tick timer → DONE
Result: Only 1 block's earnings shown
```

**After (v1.0.8):**
```
Click tree → 1st block detected → 120 tick timer → Wait for more events
While waiting:
  - If more events arrive → accumulate them → reset timer
  - If 120 ticks pass without events → batch & pay
Result: Better chance of catching all blocks, slower but more complete
```

## Compatibility

| Mod | v1.0.7 | v1.0.8 | Notes |
|-----|--------|--------|-------|
| Tree-Harvester | ✅ Perfect | ✅ Perfect | Fires events for all blocks |
| FallingTree | ❌ 1 block only | ⚠️ Partial | Silent breaks still missed, but extended timer helps |
| VeinMiner | ✅ Good | ✅ Good | Fires events for ore clusters |
| Vanilla Mining | ✅ Good | ✅ Good | Single block, no issues |

## Installation

1. Replace `shop.jar` in your mods folder with the new v1.0.8 build
2. No config changes needed
3. Test with your tree mod of choice

## What's Still Limited

FallingTree's internal tree-breaking mechanism is fundamentally event-less. v1.0.8 works around this by:
- Waiting longer (120 ticks instead of 60)
- Looking further away (100 blocks instead of 50)

But it **cannot** detect blocks broken without ANY event whatsoever. For perfect detection, FallingTree would need to fire events (not under our control).

## Real-World Behavior

**With FallingTree + v1.0.8:**
- You break a tree
- Initial log earns money immediately (event fires)
- After ~6 seconds of quiet (120 ticks), you get a summary notification
- The summary includes ALL blocks that broke during that 120-tick window
- If using FallingTree's fastest mode, most/all blocks will be caught

## Next Steps

If you want even BETTER detection:
1. Switch to **Tree-Harvester** (fires events for all blocks, works perfectly)
2. Or lobby FallingTree dev to fire events for each block removal
3. Or we implement a Mixin (requires build.gradle changes)

For now, v1.0.8 is the best compromise without heavy invasive changes.

---

**v1.0.8 Build:** Ready for testing
**Status:** All features working
**Known Issues:** Silent block breaks from FallingTree not 100% detected (by design limitation)
